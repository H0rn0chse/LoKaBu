<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Electron Test</title>
		<!-- https://electronjs.org/docs/tutorial/security#csp-meta-tag -->
		<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
		<style>
			body {
				background-color: white;
			}
		</style>

		<link rel="stylesheet" href="assets/css/global.css">
		<link rel="stylesheet" href="assets/css/section.css">
		<link rel="stylesheet" href="assets/css/navHeader.css">
	</head>
	<body>
		<nav class="nav">
			<div class="nav-item nav-header">
				<p>Header</p>
			</div>
			<div class="nav-item">
				<p class="nav-link" data-section="new" data-lang="section.title.new"></p>
			</div>
			<div class="nav-item">
				<p class="nav-link" data-section="edit" data-lang="section.title.edit"></p>
			</div>
			<div class="nav-item">
				<p class="nav-link" data-section="history" data-lang="section.title.history"></p>
			</div>
			<div class="nav-item">
				<p class="nav-link" data-section="analysis" data-lang="section.title.analysis"></p>
			</div>
			<div class="nav-item">
				<p class="nav-link" data-section="settings" data-lang="section.title.settings"></p>
			</div>
		</nav>

		<div id="content">
		</div>

		<script type="text/javascript">
			const { ipcRenderer } = require('electron');
			window.ipcRenderer = ipcRenderer;
			ipcRenderer.once("databaseChannel", (oEvent, sMessage) => {
				window.iDatabaseId = sMessage;
			});
			ipcRenderer.send("windowLoaded");

			const load = require('./assets/load');

			Promise.all([
				load.html('./sections/new/new.html'),
				load.html('./sections/edit/edit.html'),
				load.html('./sections/history/history.html'),
				load.html('./sections/analysis/analysis.html'),
				load.html('./sections/settings/settings.html')
			]).then(function () {
				load.rendererScripts();
				require('./assets/navigation');
				const i18nHelper = require("./renderer-process/i18n/helper");
				i18nHelper.applyToAll();
			});
		</script>
	</body>
</html>