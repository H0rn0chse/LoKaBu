<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<!-- https://electronjs.org/docs/tutorial/security#csp-meta-tag -->
		<meta http-equiv="Content-Security-Policy" content="script-src 'self' 'unsafe-inline';" />
	</head>
	<body>
		<script type="module">
			const { ipcRenderer } = require('electron');
			import { db } from "./worker/database/databaseConnection.js";
			import { main } from "./worker/database/main.js";
			import { ipc } from "./worker/database/ipc.js";
			ipc.setIpc(ipcRenderer);

			ipc.once("rendererChannel", (oEvent, sMessage) => {
				ipc.setRendererId(sMessage);
				db.open();
			})
			ipc.send("windowLoaded");

			ipc.on("shutdownApp", () => {
				db.close();
				ipc.send("windowProcessClosed");
			});


		</script>
	</body>
</html>